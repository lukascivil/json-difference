(function(u,h){typeof exports=="object"&&typeof module<"u"?h(exports):typeof define=="function"&&define.amd?define(["exports"],h):(u=typeof globalThis<"u"?globalThis:u||self,h(u["json-difference"]={}))})(this,function(u){"use strict";const h=(e,r)=>{const t=[];for(const a in e)if(r.hasOwnProperty(a)){if(typeof e[a]=="object"&&typeof r[a]=="object"&&JSON.stringify(e[a])===JSON.stringify(r[a]))continue;e[a]!==r[a]&&t.push([a,e[a],r[a]])}return t},M=(e,r)=>{const t=[];let a=0;for(const n in e)n in r||(t[a]=[n,e[n]],a++);return t},we=(e,r,t,a)=>{const n=a?e?"[":".":"/",o=a?e?"]":"":e?"[]":"";return r!==""?`${r}${n}${t}${o}`:`${a&&e?"[":""}${t}${o}`},j=(e,r=!1,t={},a="")=>{for(const n of Object.keys(e)){const o=we(Array.isArray(e),a,n,r);typeof e[n]=="object"&&e[n]!==null?(Object.keys(e[n]).length===0&&(t[o]=e[n]),j(e[n],r,t,o)):t[o]=e[n]}return t},Ie=(e,r,t=!1)=>{const a={added:[],removed:[],edited:[]},n=j(e,t),o=j(r,t);return a.removed=M(n,o),a.added=M(o,n),a.edited=h(n,o),a},Me=(e,[r,t])=>{const a=r.split("/");let n=e;const o=a.length-1;for(let c=0;c<o;++c){const s=a[c];if(!(s in n))if(console.log({key:s}),s.includes("[]")){const f=s.replace("[]","");n[f]=[]}else n[s]={};n=n[s]}return n[a[o]]=t,e};var S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xe=Array.isArray,b=xe,De=typeof S=="object"&&S&&S.Object===Object&&S,L=De,Ee=L,Ne=typeof self=="object"&&self&&self.Object===Object&&self,Ge=Ee||Ne||Function("return this")(),p=Ge,Fe=p,Ke=Fe.Symbol,x=Ke,W=x,q=Object.prototype,Ue=q.hasOwnProperty,ze=q.toString,T=W?W.toStringTag:void 0;function He(e){var r=Ue.call(e,T),t=e[T];try{e[T]=void 0;var a=!0}catch{}var n=ze.call(e);return a&&(r?e[T]=t:delete e[T]),n}var Ve=He,Re=Object.prototype,Be=Re.toString;function Le(e){return Be.call(e)}var We=Le,J=x,qe=Ve,Je=We,ke="[object Null]",Xe="[object Undefined]",k=J?J.toStringTag:void 0;function Ye(e){return e==null?e===void 0?Xe:ke:k&&k in Object(e)?qe(e):Je(e)}var m=Ye;function Ze(e){return e!=null&&typeof e=="object"}var C=Ze,Qe=m,er=C,rr="[object Symbol]";function tr(e){return typeof e=="symbol"||er(e)&&Qe(e)==rr}var O=tr,ar=b,nr=O,or=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ir=/^\w*$/;function sr(e,r){if(ar(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||nr(e)?!0:ir.test(e)||!or.test(e)||r!=null&&e in Object(r)}var cr=sr;function fr(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var D=fr,ur=m,pr=D,vr="[object AsyncFunction]",lr="[object Function]",gr="[object GeneratorFunction]",hr="[object Proxy]";function yr(e){if(!pr(e))return!1;var r=ur(e);return r==lr||r==gr||r==vr||r==hr}var X=yr,dr=p,$r=dr["__core-js_shared__"],_r=$r,E=_r,Y=function(){var e=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function br(e){return!!Y&&Y in e}var Tr=br,mr=Function.prototype,jr=mr.toString;function Sr(e){if(e!=null){try{return jr.call(e)}catch{}try{return e+""}catch{}}return""}var Z=Sr,Cr=X,Or=Tr,Pr=D,Ar=Z,wr=/[\\^$.*+?()[\]{}|]/g,Ir=/^\[object .+?Constructor\]$/,Mr=Function.prototype,xr=Object.prototype,Dr=Mr.toString,Er=xr.hasOwnProperty,Nr=RegExp("^"+Dr.call(Er).replace(wr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gr(e){if(!Pr(e)||Or(e))return!1;var r=Cr(e)?Nr:Ir;return r.test(Ar(e))}var Fr=Gr;function Kr(e,r){return e==null?void 0:e[r]}var Ur=Kr,zr=Fr,Hr=Ur;function Vr(e,r){var t=Hr(e,r);return zr(t)?t:void 0}var v=Vr,Rr=v,Br=Rr(Object,"create"),P=Br,Q=P;function Lr(){this.__data__=Q?Q(null):{},this.size=0}var Wr=Lr;function qr(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var Jr=qr,kr=P,Xr="__lodash_hash_undefined__",Yr=Object.prototype,Zr=Yr.hasOwnProperty;function Qr(e){var r=this.__data__;if(kr){var t=r[e];return t===Xr?void 0:t}return Zr.call(r,e)?r[e]:void 0}var et=Qr,rt=P,tt=Object.prototype,at=tt.hasOwnProperty;function nt(e){var r=this.__data__;return rt?r[e]!==void 0:at.call(r,e)}var ot=nt,it=P,st="__lodash_hash_undefined__";function ct(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=it&&r===void 0?st:r,this}var ft=ct,ut=Wr,pt=Jr,vt=et,lt=ot,gt=ft;function y(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}y.prototype.clear=ut,y.prototype.delete=pt,y.prototype.get=vt,y.prototype.has=lt,y.prototype.set=gt;var ht=y;function yt(){this.__data__=[],this.size=0}var dt=yt;function $t(e,r){return e===r||e!==e&&r!==r}var ee=$t,_t=ee;function bt(e,r){for(var t=e.length;t--;)if(_t(e[t][0],r))return t;return-1}var A=bt,Tt=A,mt=Array.prototype,jt=mt.splice;function St(e){var r=this.__data__,t=Tt(r,e);if(t<0)return!1;var a=r.length-1;return t==a?r.pop():jt.call(r,t,1),--this.size,!0}var Ct=St,Ot=A;function Pt(e){var r=this.__data__,t=Ot(r,e);return t<0?void 0:r[t][1]}var At=Pt,wt=A;function It(e){return wt(this.__data__,e)>-1}var Mt=It,xt=A;function Dt(e,r){var t=this.__data__,a=xt(t,e);return a<0?(++this.size,t.push([e,r])):t[a][1]=r,this}var Et=Dt,Nt=dt,Gt=Ct,Ft=At,Kt=Mt,Ut=Et;function d(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}d.prototype.clear=Nt,d.prototype.delete=Gt,d.prototype.get=Ft,d.prototype.has=Kt,d.prototype.set=Ut;var zt=d,Ht=v,Vt=p,Rt=Ht(Vt,"Map"),re=Rt,te=ht,Bt=zt,Lt=re;function Wt(){this.size=0,this.__data__={hash:new te,map:new(Lt||Bt),string:new te}}var qt=Wt;function Jt(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var kt=Jt,Xt=kt;function Yt(e,r){var t=e.__data__;return Xt(r)?t[typeof r=="string"?"string":"hash"]:t.map}var w=Yt,Zt=w;function Qt(e){var r=Zt(this,e).delete(e);return this.size-=r?1:0,r}var ea=Qt,ra=w;function ta(e){return ra(this,e).get(e)}var aa=ta,na=w;function oa(e){return na(this,e).has(e)}var ia=oa,sa=w;function ca(e,r){var t=sa(this,e),a=t.size;return t.set(e,r),this.size+=t.size==a?0:1,this}var fa=ca,ua=qt,pa=ea,va=aa,la=ia,ga=fa;function $(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}$.prototype.clear=ua,$.prototype.delete=pa,$.prototype.get=va,$.prototype.has=la,$.prototype.set=ga;var ha=$,ae=ha,ya="Expected a function";function N(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(ya);var t=function(){var a=arguments,n=r?r.apply(this,a):a[0],o=t.cache;if(o.has(n))return o.get(n);var c=e.apply(this,a);return t.cache=o.set(n,c)||o,c};return t.cache=new(N.Cache||ae),t}N.Cache=ae;var da=N,$a=da,_a=500;function ba(e){var r=$a(e,function(a){return t.size===_a&&t.clear(),a}),t=r.cache;return r}var Ta=ba,ma=Ta,ja=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sa=/\\(\\)?/g,Ca=ma(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(ja,function(t,a,n,o){r.push(n?o.replace(Sa,"$1"):a||t)}),r}),ne=Ca;function Oa(e,r){for(var t=-1,a=e==null?0:e.length,n=Array(a);++t<a;)n[t]=r(e[t],t,e);return n}var oe=Oa,ie=x,Pa=oe,Aa=b,wa=O,Ia=1/0,se=ie?ie.prototype:void 0,ce=se?se.toString:void 0;function fe(e){if(typeof e=="string")return e;if(Aa(e))return Pa(e,fe)+"";if(wa(e))return ce?ce.call(e):"";var r=e+"";return r=="0"&&1/e==-Ia?"-0":r}var Ma=fe,xa=Ma;function Da(e){return e==null?"":xa(e)}var ue=Da,Ea=b,Na=cr,Ga=ne,Fa=ue;function Ka(e,r){return Ea(e)?e:Na(e,r)?[e]:Ga(Fa(e))}var G=Ka;function Ua(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}var za=Ua,Ha=O,Va=1/0;function Ra(e){if(typeof e=="string"||Ha(e))return e;var r=e+"";return r=="0"&&1/e==-Va?"-0":r}var I=Ra,Ba=G,La=I;function Wa(e,r){r=Ba(r,e);for(var t=0,a=r.length;e!=null&&t<a;)e=e[La(r[t++])];return t&&t==a?e:void 0}var pe=Wa;function qa(e,r,t){var a=-1,n=e.length;r<0&&(r=-r>n?0:n+r),t=t>n?n:t,t<0&&(t+=n),n=r>t?0:t-r>>>0,r>>>=0;for(var o=Array(n);++a<n;)o[a]=e[a+r];return o}var Ja=qa,ka=pe,Xa=Ja;function Ya(e,r){return r.length<2?e:ka(e,Xa(r,0,-1))}var Za=Ya,Qa=G,en=za,rn=Za,tn=I;function an(e,r){return r=Qa(r,e),e=rn(e,r),e==null||delete e[tn(en(r))]}var nn=an,on=nn;function sn(e,r){return e==null?!0:on(e,r)}var ve=sn,cn=pe;function fn(e,r,t){var a=e==null?void 0:cn(e,r);return a===void 0?t:a}var un=fn,pn=v,vn=function(){try{var e=pn(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ln=vn,le=ln;function gn(e,r,t){r=="__proto__"&&le?le(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}var hn=gn,yn=hn,dn=ee,$n=Object.prototype,_n=$n.hasOwnProperty;function bn(e,r,t){var a=e[r];(!(_n.call(e,r)&&dn(a,t))||t===void 0&&!(r in e))&&yn(e,r,t)}var Tn=bn,mn=9007199254740991,jn=/^(?:0|[1-9]\d*)$/;function Sn(e,r){var t=typeof e;return r=r==null?mn:r,!!r&&(t=="number"||t!="symbol"&&jn.test(e))&&e>-1&&e%1==0&&e<r}var Cn=Sn,On=Tn,Pn=G,An=Cn,ge=D,wn=I;function In(e,r,t,a){if(!ge(e))return e;r=Pn(r,e);for(var n=-1,o=r.length,c=o-1,s=e;s!=null&&++n<o;){var f=wn(r[n]),g=t;if(f==="__proto__"||f==="constructor"||f==="prototype")return e;if(n!=c){var B=s[f];g=a?a(B,f,s):void 0,g===void 0&&(g=ge(B)?B:An(r[n+1])?[]:{})}On(s,f,g),s=s[f]}return e}var he=In,Mn=he;function xn(e,r,t){return e==null?e:Mn(e,r,t)}var Dn=xn,En=he;function Nn(e,r,t,a){return a=typeof a=="function"?a:void 0,e==null?e:En(e,r,t,a)}var Gn=Nn,Fn=Object.prototype;function Kn(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||Fn;return e===t}var ye=Kn;function Un(e,r){return function(t){return e(r(t))}}var zn=Un,Hn=zn,Vn=Hn(Object.keys,Object),Rn=Vn,Bn=ye,Ln=Rn,Wn=Object.prototype,qn=Wn.hasOwnProperty;function Jn(e){if(!Bn(e))return Ln(e);var r=[];for(var t in Object(e))qn.call(e,t)&&t!="constructor"&&r.push(t);return r}var kn=Jn,Xn=v,Yn=p,Zn=Xn(Yn,"DataView"),Qn=Zn,eo=v,ro=p,to=eo(ro,"Promise"),ao=to,no=v,oo=p,io=no(oo,"Set"),so=io,co=v,fo=p,uo=co(fo,"WeakMap"),po=uo,F=Qn,K=re,U=ao,z=so,H=po,de=m,_=Z,$e="[object Map]",vo="[object Object]",_e="[object Promise]",be="[object Set]",Te="[object WeakMap]",me="[object DataView]",lo=_(F),go=_(K),ho=_(U),yo=_(z),$o=_(H),l=de;(F&&l(new F(new ArrayBuffer(1)))!=me||K&&l(new K)!=$e||U&&l(U.resolve())!=_e||z&&l(new z)!=be||H&&l(new H)!=Te)&&(l=function(e){var r=de(e),t=r==vo?e.constructor:void 0,a=t?_(t):"";if(a)switch(a){case lo:return me;case go:return $e;case ho:return _e;case yo:return be;case $o:return Te}return r});var _o=l,bo=m,To=C,mo="[object Arguments]";function jo(e){return To(e)&&bo(e)==mo}var So=jo,je=So,Co=C,Se=Object.prototype,Oo=Se.hasOwnProperty,Po=Se.propertyIsEnumerable,Ao=je(function(){return arguments}())?je:function(e){return Co(e)&&Oo.call(e,"callee")&&!Po.call(e,"callee")},wo=Ao,Io=9007199254740991;function Mo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Io}var Ce=Mo,xo=X,Do=Ce;function Eo(e){return e!=null&&Do(e.length)&&!xo(e)}var No=Eo,V={exports:{}};function Go(){return!1}var Fo=Go;(function(e,r){var t=p,a=Fo,n=r&&!r.nodeType&&r,o=n&&!0&&e&&!e.nodeType&&e,c=o&&o.exports===n,s=c?t.Buffer:void 0,f=s?s.isBuffer:void 0,g=f||a;e.exports=g})(V,V.exports);var Ko=m,Uo=Ce,zo=C,Ho="[object Arguments]",Vo="[object Array]",Ro="[object Boolean]",Bo="[object Date]",Lo="[object Error]",Wo="[object Function]",qo="[object Map]",Jo="[object Number]",ko="[object Object]",Xo="[object RegExp]",Yo="[object Set]",Zo="[object String]",Qo="[object WeakMap]",ei="[object ArrayBuffer]",ri="[object DataView]",ti="[object Float32Array]",ai="[object Float64Array]",ni="[object Int8Array]",oi="[object Int16Array]",ii="[object Int32Array]",si="[object Uint8Array]",ci="[object Uint8ClampedArray]",fi="[object Uint16Array]",ui="[object Uint32Array]",i={};i[ti]=i[ai]=i[ni]=i[oi]=i[ii]=i[si]=i[ci]=i[fi]=i[ui]=!0,i[Ho]=i[Vo]=i[ei]=i[Ro]=i[ri]=i[Bo]=i[Lo]=i[Wo]=i[qo]=i[Jo]=i[ko]=i[Xo]=i[Yo]=i[Zo]=i[Qo]=!1;function pi(e){return zo(e)&&Uo(e.length)&&!!i[Ko(e)]}var vi=pi;function li(e){return function(r){return e(r)}}var gi=li,R={exports:{}};(function(e,r){var t=L,a=r&&!r.nodeType&&r,n=a&&!0&&e&&!e.nodeType&&e,o=n&&n.exports===a,c=o&&t.process,s=function(){try{var f=n&&n.require&&n.require("util").types;return f||c&&c.binding&&c.binding("util")}catch{}}();e.exports=s})(R,R.exports);var hi=vi,yi=gi,Oe=R.exports,Pe=Oe&&Oe.isTypedArray,di=Pe?yi(Pe):hi,$i=di,_i=kn,bi=_o,Ti=wo,mi=b,ji=No,Si=V.exports,Ci=ye,Oi=$i,Pi="[object Map]",Ai="[object Set]",wi=Object.prototype,Ii=wi.hasOwnProperty;function Mi(e){if(e==null)return!0;if(ji(e)&&(mi(e)||typeof e=="string"||typeof e.splice=="function"||Si(e)||Oi(e)||Ti(e)))return!e.length;var r=bi(e);if(r==Pi||r==Ai)return!e.size;if(Ci(e))return!_i(e).length;for(var t in e)if(Ii.call(e,t))return!1;return!0}var xi=Mi;function Di(e,r){var t=-1,a=e.length;for(r||(r=Array(a));++t<a;)r[t]=e[t];return r}var Ei=Di,Ni=oe,Gi=Ei,Fi=b,Ki=O,Ui=ne,zi=I,Hi=ue;function Vi(e){return Fi(e)?Ni(e,zi):Ki(e)?[e]:Gi(Ui(Hi(e)))}var Ae=Vi;const Ri=(e,r)=>{const t=JSON.parse(JSON.stringify(e));return r.added.forEach(a=>{ve(t,a[0])}),r.removed.forEach(a=>{const n=Ae(a[0]);n.splice(-1);const o=un(t,n);console.log({ori:a[0].split("."),parentPartialPaths:n,parentValue:o}),typeof o=="object"&&xi(o)&&ve(t,n),console.log({eaqui:a[0],valor:a[1],toPath:Ae(a[0])}),Gn(t,a[0],a[1],c=>{console.log({cafe:c});const s=a[0].split(".").pop();return s&&s.includes("[")?[]:c||{}})}),r.edited.forEach(a=>{Dn(t,a[0],a[1])}),t};u.addDynamicProperty=Me,u.applyDeltaDiff=Ri,u.getDiff=Ie,u.getEditedPaths=h,u.getPathsDiff=M,u.getStructPaths=j,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
