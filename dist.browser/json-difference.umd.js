(function(r,y){typeof exports=="object"&&typeof module<"u"?y(exports):typeof define=="function"&&define.amd?define(["exports"],y):(r=typeof globalThis<"u"?globalThis:r||self,y(r["json-difference"]={}))})(this,function(r){"use strict";const y=(e,f)=>{const o=[];for(const n in e)if(f.hasOwnProperty(n)){if(typeof e[n]=="object"&&typeof f[n]=="object"&&JSON.stringify(e[n])===JSON.stringify(f[n])||e[n]===f[n])continue;if(e[n]==="@{}"||e[n]==="@[]"){const i=f[n]==="@{}"?{}:f[n]==="@[]"?[]:f[n];e[n]==="@{}"?JSON.stringify(f[n])!=="{}"&&o.push([n,{},i]):JSON.stringify(f[n])!=="[]"&&o.push([n,[],i])}else o.push([n,e[n],f[n]])}return o},_=(e,f)=>{const o=[];let n=0;for(const i in e)if(!(i in f)){const s=e[i]==="@{}"?{}:e[i]==="@[]"?[]:e[i];o[n]=[i,s],n++}return o},d=(e,f,o,n)=>{const i=n?e?"[":".":"/",s=n?e?"]":"":e?"[]":"";return f==="__start__"?`${n&&e?"[":""}${o}${s}`:`${f}${i}${o}${s}`},t=(e,f=!1,o,n="__start__")=>{o===void 0&&(o=Array.isArray(e)?{__root__:"@[]"}:{__root__:"@{}"});for(const i of Object.keys(e)){const s=d(Array.isArray(e),n,i,f);typeof e[i]=="object"&&e[i]!==null?(Object.keys(e[i]).length===0?o[s]=e[i]:o[s]=Array.isArray(e[i])?"@[]":"@{}",t(e[i],f,o,s)):o[s]=e[i]}return o},c=e=>(e.edited=e.edited.filter(f=>!(typeof f[1]=="object"&&f[2]==="@{}")).map(f=>f[2]==="@{}"?[f[0],f[1],{}]:f[2]==="@[]"?[f[0],f[1],[]]:f),e),p={isLodashLike:!1},l=(e,f,o)=>{const{isLodashLike:n}=o??p,i={added:[],removed:[],edited:[]},s=t(e,n),g=t(f,n);return i.removed=_(s,g),i.added=_(g,s),i.edited=y(s,g),c(i)};r.getDiff=l,r.getEditedPaths=y,r.getPathsDiff=_,r.getStructPaths=t,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
