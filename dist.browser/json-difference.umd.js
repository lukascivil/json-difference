(function(u,h){typeof exports=="object"&&typeof module<"u"?h(exports):typeof define=="function"&&define.amd?define(["exports"],h):(u=typeof globalThis<"u"?globalThis:u||self,h(u["json-difference"]={}))})(this,function(u){"use strict";const h=(e,r)=>{const t=[];for(const a in e)if(r.hasOwnProperty(a)){if(typeof e[a]=="object"&&typeof r[a]=="object"&&JSON.stringify(e[a])===JSON.stringify(r[a]))continue;e[a]!==r[a]&&t.push([a,e[a],r[a]])}return t},M=(e,r)=>{const t=[];let a=0;for(const n in e)n in r||(t[a]=[n,e[n]],a++);return t},Ae=(e,r,t,a)=>{const n=a?e?"[":".":"/",i=a?e?"]":"":e?"[]":"";return r!==""?`${r}${n}${t}${i}`:`${a&&e?"[":""}${t}${i}`},j=(e,r=!1,t={},a="")=>{for(const n of Object.keys(e)){const i=Ae(Array.isArray(e),a,n,r);typeof e[n]=="object"&&e[n]!==null?(Object.keys(e[n]).length===0&&(t[i]=e[n]),j(e[n],r,t,i)):t[i]=e[n]}return t},we=(e,r,t=!1)=>{const a={added:[],removed:[],edited:[]},n=j(e,t),i=j(r,t);return a.removed=M(n,i),a.added=M(i,n),a.edited=h(n,i),a};var S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ie=Array.isArray,b=Ie,Me=typeof S=="object"&&S&&S.Object===Object&&S,L=Me,xe=L,De=typeof self=="object"&&self&&self.Object===Object&&self,Ee=xe||De||Function("return this")(),p=Ee,Ne=p,Ge=Ne.Symbol,x=Ge,W=x,J=Object.prototype,Fe=J.hasOwnProperty,Ke=J.toString,T=W?W.toStringTag:void 0;function Ue(e){var r=Fe.call(e,T),t=e[T];try{e[T]=void 0;var a=!0}catch{}var n=Ke.call(e);return a&&(r?e[T]=t:delete e[T]),n}var ze=Ue,He=Object.prototype,Ve=He.toString;function Re(e){return Ve.call(e)}var Be=Re,q=x,Le=ze,We=Be,Je="[object Null]",qe="[object Undefined]",X=q?q.toStringTag:void 0;function Xe(e){return e==null?e===void 0?qe:Je:X&&X in Object(e)?Le(e):We(e)}var m=Xe;function ke(e){return e!=null&&typeof e=="object"}var C=ke,Ye=m,Ze=C,Qe="[object Symbol]";function er(e){return typeof e=="symbol"||Ze(e)&&Ye(e)==Qe}var O=er,rr=b,tr=O,ar=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nr=/^\w*$/;function ir(e,r){if(rr(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||tr(e)?!0:nr.test(e)||!ar.test(e)||r!=null&&e in Object(r)}var or=ir;function sr(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var D=sr,cr=m,fr=D,ur="[object AsyncFunction]",pr="[object Function]",vr="[object GeneratorFunction]",lr="[object Proxy]";function gr(e){if(!fr(e))return!1;var r=cr(e);return r==pr||r==vr||r==ur||r==lr}var k=gr,hr=p,yr=hr["__core-js_shared__"],dr=yr,E=dr,Y=function(){var e=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function $r(e){return!!Y&&Y in e}var _r=$r,br=Function.prototype,Tr=br.toString;function mr(e){if(e!=null){try{return Tr.call(e)}catch{}try{return e+""}catch{}}return""}var Z=mr,jr=k,Sr=_r,Cr=D,Or=Z,Pr=/[\\^$.*+?()[\]{}|]/g,Ar=/^\[object .+?Constructor\]$/,wr=Function.prototype,Ir=Object.prototype,Mr=wr.toString,xr=Ir.hasOwnProperty,Dr=RegExp("^"+Mr.call(xr).replace(Pr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Er(e){if(!Cr(e)||Sr(e))return!1;var r=jr(e)?Dr:Ar;return r.test(Or(e))}var Nr=Er;function Gr(e,r){return e==null?void 0:e[r]}var Fr=Gr,Kr=Nr,Ur=Fr;function zr(e,r){var t=Ur(e,r);return Kr(t)?t:void 0}var v=zr,Hr=v,Vr=Hr(Object,"create"),P=Vr,Q=P;function Rr(){this.__data__=Q?Q(null):{},this.size=0}var Br=Rr;function Lr(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var Wr=Lr,Jr=P,qr="__lodash_hash_undefined__",Xr=Object.prototype,kr=Xr.hasOwnProperty;function Yr(e){var r=this.__data__;if(Jr){var t=r[e];return t===qr?void 0:t}return kr.call(r,e)?r[e]:void 0}var Zr=Yr,Qr=P,et=Object.prototype,rt=et.hasOwnProperty;function tt(e){var r=this.__data__;return Qr?r[e]!==void 0:rt.call(r,e)}var at=tt,nt=P,it="__lodash_hash_undefined__";function ot(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=nt&&r===void 0?it:r,this}var st=ot,ct=Br,ft=Wr,ut=Zr,pt=at,vt=st;function y(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}y.prototype.clear=ct,y.prototype.delete=ft,y.prototype.get=ut,y.prototype.has=pt,y.prototype.set=vt;var lt=y;function gt(){this.__data__=[],this.size=0}var ht=gt;function yt(e,r){return e===r||e!==e&&r!==r}var ee=yt,dt=ee;function $t(e,r){for(var t=e.length;t--;)if(dt(e[t][0],r))return t;return-1}var A=$t,_t=A,bt=Array.prototype,Tt=bt.splice;function mt(e){var r=this.__data__,t=_t(r,e);if(t<0)return!1;var a=r.length-1;return t==a?r.pop():Tt.call(r,t,1),--this.size,!0}var jt=mt,St=A;function Ct(e){var r=this.__data__,t=St(r,e);return t<0?void 0:r[t][1]}var Ot=Ct,Pt=A;function At(e){return Pt(this.__data__,e)>-1}var wt=At,It=A;function Mt(e,r){var t=this.__data__,a=It(t,e);return a<0?(++this.size,t.push([e,r])):t[a][1]=r,this}var xt=Mt,Dt=ht,Et=jt,Nt=Ot,Gt=wt,Ft=xt;function d(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}d.prototype.clear=Dt,d.prototype.delete=Et,d.prototype.get=Nt,d.prototype.has=Gt,d.prototype.set=Ft;var Kt=d,Ut=v,zt=p,Ht=Ut(zt,"Map"),re=Ht,te=lt,Vt=Kt,Rt=re;function Bt(){this.size=0,this.__data__={hash:new te,map:new(Rt||Vt),string:new te}}var Lt=Bt;function Wt(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var Jt=Wt,qt=Jt;function Xt(e,r){var t=e.__data__;return qt(r)?t[typeof r=="string"?"string":"hash"]:t.map}var w=Xt,kt=w;function Yt(e){var r=kt(this,e).delete(e);return this.size-=r?1:0,r}var Zt=Yt,Qt=w;function ea(e){return Qt(this,e).get(e)}var ra=ea,ta=w;function aa(e){return ta(this,e).has(e)}var na=aa,ia=w;function oa(e,r){var t=ia(this,e),a=t.size;return t.set(e,r),this.size+=t.size==a?0:1,this}var sa=oa,ca=Lt,fa=Zt,ua=ra,pa=na,va=sa;function $(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}$.prototype.clear=ca,$.prototype.delete=fa,$.prototype.get=ua,$.prototype.has=pa,$.prototype.set=va;var la=$,ae=la,ga="Expected a function";function N(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(ga);var t=function(){var a=arguments,n=r?r.apply(this,a):a[0],i=t.cache;if(i.has(n))return i.get(n);var c=e.apply(this,a);return t.cache=i.set(n,c)||i,c};return t.cache=new(N.Cache||ae),t}N.Cache=ae;var ha=N,ya=ha,da=500;function $a(e){var r=ya(e,function(a){return t.size===da&&t.clear(),a}),t=r.cache;return r}var _a=$a,ba=_a,Ta=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ma=/\\(\\)?/g,ja=ba(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Ta,function(t,a,n,i){r.push(n?i.replace(ma,"$1"):a||t)}),r}),ne=ja;function Sa(e,r){for(var t=-1,a=e==null?0:e.length,n=Array(a);++t<a;)n[t]=r(e[t],t,e);return n}var ie=Sa,oe=x,Ca=ie,Oa=b,Pa=O,Aa=1/0,se=oe?oe.prototype:void 0,ce=se?se.toString:void 0;function fe(e){if(typeof e=="string")return e;if(Oa(e))return Ca(e,fe)+"";if(Pa(e))return ce?ce.call(e):"";var r=e+"";return r=="0"&&1/e==-Aa?"-0":r}var wa=fe,Ia=wa;function Ma(e){return e==null?"":Ia(e)}var ue=Ma,xa=b,Da=or,Ea=ne,Na=ue;function Ga(e,r){return xa(e)?e:Da(e,r)?[e]:Ea(Na(e))}var G=Ga;function Fa(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}var Ka=Fa,Ua=O,za=1/0;function Ha(e){if(typeof e=="string"||Ua(e))return e;var r=e+"";return r=="0"&&1/e==-za?"-0":r}var I=Ha,Va=G,Ra=I;function Ba(e,r){r=Va(r,e);for(var t=0,a=r.length;e!=null&&t<a;)e=e[Ra(r[t++])];return t&&t==a?e:void 0}var pe=Ba;function La(e,r,t){var a=-1,n=e.length;r<0&&(r=-r>n?0:n+r),t=t>n?n:t,t<0&&(t+=n),n=r>t?0:t-r>>>0,r>>>=0;for(var i=Array(n);++a<n;)i[a]=e[a+r];return i}var Wa=La,Ja=pe,qa=Wa;function Xa(e,r){return r.length<2?e:Ja(e,qa(r,0,-1))}var ka=Xa,Ya=G,Za=Ka,Qa=ka,en=I;function rn(e,r){return r=Ya(r,e),e=Qa(e,r),e==null||delete e[en(Za(r))]}var tn=rn,an=tn;function nn(e,r){return e==null?!0:an(e,r)}var ve=nn,on=pe;function sn(e,r,t){var a=e==null?void 0:on(e,r);return a===void 0?t:a}var cn=sn,fn=v,un=function(){try{var e=fn(Object,"defineProperty");return e({},"",{}),e}catch{}}(),pn=un,le=pn;function vn(e,r,t){r=="__proto__"&&le?le(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}var ln=vn,gn=ln,hn=ee,yn=Object.prototype,dn=yn.hasOwnProperty;function $n(e,r,t){var a=e[r];(!(dn.call(e,r)&&hn(a,t))||t===void 0&&!(r in e))&&gn(e,r,t)}var _n=$n,bn=9007199254740991,Tn=/^(?:0|[1-9]\d*)$/;function mn(e,r){var t=typeof e;return r=r==null?bn:r,!!r&&(t=="number"||t!="symbol"&&Tn.test(e))&&e>-1&&e%1==0&&e<r}var jn=mn,Sn=_n,Cn=G,On=jn,ge=D,Pn=I;function An(e,r,t,a){if(!ge(e))return e;r=Cn(r,e);for(var n=-1,i=r.length,c=i-1,s=e;s!=null&&++n<i;){var f=Pn(r[n]),g=t;if(f==="__proto__"||f==="constructor"||f==="prototype")return e;if(n!=c){var B=s[f];g=a?a(B,f,s):void 0,g===void 0&&(g=ge(B)?B:On(r[n+1])?[]:{})}Sn(s,f,g),s=s[f]}return e}var he=An,wn=he;function In(e,r,t){return e==null?e:wn(e,r,t)}var Mn=In,xn=he;function Dn(e,r,t,a){return a=typeof a=="function"?a:void 0,e==null?e:xn(e,r,t,a)}var En=Dn,Nn=Object.prototype;function Gn(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||Nn;return e===t}var ye=Gn;function Fn(e,r){return function(t){return e(r(t))}}var Kn=Fn,Un=Kn,zn=Un(Object.keys,Object),Hn=zn,Vn=ye,Rn=Hn,Bn=Object.prototype,Ln=Bn.hasOwnProperty;function Wn(e){if(!Vn(e))return Rn(e);var r=[];for(var t in Object(e))Ln.call(e,t)&&t!="constructor"&&r.push(t);return r}var Jn=Wn,qn=v,Xn=p,kn=qn(Xn,"DataView"),Yn=kn,Zn=v,Qn=p,ei=Zn(Qn,"Promise"),ri=ei,ti=v,ai=p,ni=ti(ai,"Set"),ii=ni,oi=v,si=p,ci=oi(si,"WeakMap"),fi=ci,F=Yn,K=re,U=ri,z=ii,H=fi,de=m,_=Z,$e="[object Map]",ui="[object Object]",_e="[object Promise]",be="[object Set]",Te="[object WeakMap]",me="[object DataView]",pi=_(F),vi=_(K),li=_(U),gi=_(z),hi=_(H),l=de;(F&&l(new F(new ArrayBuffer(1)))!=me||K&&l(new K)!=$e||U&&l(U.resolve())!=_e||z&&l(new z)!=be||H&&l(new H)!=Te)&&(l=function(e){var r=de(e),t=r==ui?e.constructor:void 0,a=t?_(t):"";if(a)switch(a){case pi:return me;case vi:return $e;case li:return _e;case gi:return be;case hi:return Te}return r});var yi=l,di=m,$i=C,_i="[object Arguments]";function bi(e){return $i(e)&&di(e)==_i}var Ti=bi,je=Ti,mi=C,Se=Object.prototype,ji=Se.hasOwnProperty,Si=Se.propertyIsEnumerable,Ci=je(function(){return arguments}())?je:function(e){return mi(e)&&ji.call(e,"callee")&&!Si.call(e,"callee")},Oi=Ci,Pi=9007199254740991;function Ai(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Pi}var Ce=Ai,wi=k,Ii=Ce;function Mi(e){return e!=null&&Ii(e.length)&&!wi(e)}var xi=Mi,V={exports:{}};function Di(){return!1}var Ei=Di;(function(e,r){var t=p,a=Ei,n=r&&!r.nodeType&&r,i=n&&!0&&e&&!e.nodeType&&e,c=i&&i.exports===n,s=c?t.Buffer:void 0,f=s?s.isBuffer:void 0,g=f||a;e.exports=g})(V,V.exports);var Ni=m,Gi=Ce,Fi=C,Ki="[object Arguments]",Ui="[object Array]",zi="[object Boolean]",Hi="[object Date]",Vi="[object Error]",Ri="[object Function]",Bi="[object Map]",Li="[object Number]",Wi="[object Object]",Ji="[object RegExp]",qi="[object Set]",Xi="[object String]",ki="[object WeakMap]",Yi="[object ArrayBuffer]",Zi="[object DataView]",Qi="[object Float32Array]",eo="[object Float64Array]",ro="[object Int8Array]",to="[object Int16Array]",ao="[object Int32Array]",no="[object Uint8Array]",io="[object Uint8ClampedArray]",oo="[object Uint16Array]",so="[object Uint32Array]",o={};o[Qi]=o[eo]=o[ro]=o[to]=o[ao]=o[no]=o[io]=o[oo]=o[so]=!0,o[Ki]=o[Ui]=o[Yi]=o[zi]=o[Zi]=o[Hi]=o[Vi]=o[Ri]=o[Bi]=o[Li]=o[Wi]=o[Ji]=o[qi]=o[Xi]=o[ki]=!1;function co(e){return Fi(e)&&Gi(e.length)&&!!o[Ni(e)]}var fo=co;function uo(e){return function(r){return e(r)}}var po=uo,R={exports:{}};(function(e,r){var t=L,a=r&&!r.nodeType&&r,n=a&&!0&&e&&!e.nodeType&&e,i=n&&n.exports===a,c=i&&t.process,s=function(){try{var f=n&&n.require&&n.require("util").types;return f||c&&c.binding&&c.binding("util")}catch{}}();e.exports=s})(R,R.exports);var vo=fo,lo=po,Oe=R.exports,Pe=Oe&&Oe.isTypedArray,go=Pe?lo(Pe):vo,ho=go,yo=Jn,$o=yi,_o=Oi,bo=b,To=xi,mo=V.exports,jo=ye,So=ho,Co="[object Map]",Oo="[object Set]",Po=Object.prototype,Ao=Po.hasOwnProperty;function wo(e){if(e==null)return!0;if(To(e)&&(bo(e)||typeof e=="string"||typeof e.splice=="function"||mo(e)||So(e)||_o(e)))return!e.length;var r=$o(e);if(r==Co||r==Oo)return!e.size;if(jo(e))return!yo(e).length;for(var t in e)if(Ao.call(e,t))return!1;return!0}var Io=wo;function Mo(e,r){var t=-1,a=e.length;for(r||(r=Array(a));++t<a;)r[t]=e[t];return r}var xo=Mo,Do=ie,Eo=xo,No=b,Go=O,Fo=ne,Ko=I,Uo=ue;function zo(e){return No(e)?Do(e,Ko):Go(e)?[e]:Eo(Fo(Uo(e)))}var Ho=zo;const Vo=(e,r)=>{const t=JSON.parse(JSON.stringify(e));return r.added.forEach(a=>{ve(t,a[0])}),r.removed.forEach(a=>{const n=Ho(a[0]);n.splice(-1);const i=cn(t,n);typeof i=="object"&&Io(i)&&ve(t,n),En(t,a[0],a[1],c=>{const s=a[0].split(".").pop();return s&&s.includes("[")?[]:c||{}})}),r.edited.forEach(a=>{Mn(t,a[0],a[1])}),t};u.applyDeltaDiff=Vo,u.getDiff=we,u.getEditedPaths=h,u.getPathsDiff=M,u.getStructPaths=j,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
